<h2>Tarefas</h2>

<button (click)="reload()">Recarregar</button>

<!-- Formulário de criação -->
<form [formGroup]="form" (ngSubmit)="submit()" style="margin-top: 16px; padding: 12px; border: 1px solid #ddd">
  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
    <label>
      Título *
      <input type="text" formControlName="title" />
    </label>

    <label>
      Projeto *
      <select formControlName="projectId">
        <option [ngValue]="null">Selecione...</option>
        <option *ngFor="let p of projects" [ngValue]="p.id">{{ p.name }}</option>
      </select>
    </label>

    <label style="grid-column: 1 / -1">
      Descrição
      <textarea rows="2" formControlName="description"></textarea>
    </label>

    <label>
      Status *
      <select formControlName="status">
        <option value="OPEN">OPEN</option>
        <option value="IN_PROGRESS">IN_PROGRESS</option>
        <option value="DONE">DONE</option>
      </select>
    </label>
  </div>

  <button type="submit" [disabled]="form.invalid" style="margin-top: 12px;">Criar tarefa</button>
</form>

<!-- Tabela -->
<table border="1" cellpadding="8" cellspacing="0" style="margin-top: 16px; width: 100%; max-width: 820px;">
  <thead>
    <tr>
      <th>ID</th>
      <th>Título</th>
      <th>Status</th>
      <th>Projeto</th>
      <th>Criada em</th>
      <th>Ações</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let t of page?.content">
      <td>{{ t.id }}</td>
      <td>{{ t.title }}</td>
      <td>{{ t.status }}</td>
      <td>{{ t.projectName }}</td>
      <td>{{ t.createdAt | date:'short' }}</td>
      <td>
        <button (click)="remove(t.id)">Excluir</button>
      </td>
    </tr>
  </tbody>
</table>
